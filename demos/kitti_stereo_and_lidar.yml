# -----------------------------------------------------------------------------
#                        SLAM system definition for MOLA
# This file defines:
# a 3D stereo+Lidar SLAM problem, fed from a Kitti dataset.
# -----------------------------------------------------------------------------

modules:
# Setup of SLAM back-end =====================================
  - name: backend
    type: RSLAM_gtsam
    execution_rate: 100 # Hz
    verbosity_level: INFO
    params:
      # ...
# Setup of SLAM front-ends ====================================
#  - name: stereo_visual_fe
#    type: FE_Stereo_ORB
#    raw_data_source: kitti_input
#    raw_sensor_label_left : image_0
#    raw_sensor_label_right: image_1
#    params:
#      # ...
  - name: mono_visual_fe
    type: VisualORB_Mono
    raw_data_source: kitti_input
    raw_sensor_label : image_0
    params:
      # ...
  - name: lidar_fe
    type: LidarICP
    raw_data_source: kitti_input
    raw_sensor_label: lidar
    params:
      # ...
# Offline or online sensory data sources =====================
# TODO: Create a YAML !include
  - name: kitti_input
    type: KittiOdometryDataset
    execution_rate: 25 # Hz
    gui_preview_sensors:
      - raw_sensor_label: image_0
        decimation: 1
        win_pos: 0 0 500 200 # [x,y,width,height]
      - raw_sensor_label: image_1
        decimation: 1
        win_pos: 510 0 500 200 # [x,y,width,height]
      - raw_sensor_label: lidar
        decimation: 1
        win_pos: 0 210 600 350  # [x,y,width,height]
    params:
      base_dir: ${KITTI_BASE_DIR}
      sequence: 00
      time_warp_scale: 1.0
      publish_lidar: true
      publish_image_0: true
      publish_image_1: true
